#!/usr/bin/env sh
# -*- coding: utf-8 -*-
# {{ ansible_managed }}

MESSAGE="
    .___        _____                        __                        __
    |   | _____/ ____\___________    _______/  |________ __ __   _____/  |_ __ _________   ____
    |   |/    \   __\\\_  __ \__  \  /  ___/\   __\_  __ \  |  \_/ ___\   __\  |  \_  __ \_/ __ \\
    |   |   |  \  |   |  | \// __ \_\___ \  |  |  |  | \/  |  /\  \___|  | |  |  /|  | \/\  ___/
    |___|___|  /__|   |__|  (____  /____  > |__|  |__|  |____/  \___  >__| |____/ |__|    \___  >
            \/                  \/     \/                          \/                        \/


    Hostname:       {{ common_hostname }}
    IPv4:           {{ ansible_facts.default_ipv4.address }}/24 / $(tailscale ip -4 || echo 'n/a')

    Architecture:   {{ ansible_facts.architecture }}
    Kernel:         $(uname -r)
    OS:             {{ ansible_facts.distribution }} {{ ansible_facts.distribution_version }}
    CPUs:           {{ ansible_facts.processor_vcpus }} Cores
    Memory:         {{ (ansible_facts.memtotal_mb / 1024) | round }} GB
    {% if "raspberry" in group_names -%}
    Temperature:    $(vcgencmd measure_temp | grep -Po '\d+\.\d+') 'C
    {% endif %}

    Uptime:         $(uptime -p | sed 's/up //g')
    Timezone:       $(date +'%Z(%z)')
"

printf "%s" "$MESSAGE"
